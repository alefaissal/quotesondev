!function(o){o(function(){let e="";o("#new-quote-button").on("click",function(t){t.preventDefault(),e=document.URL,o.ajax({method:"get",url:qod_api.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){const t=e[0];console.log(t),function(e){const t=e[0];console.log("post",t);const n=t._qod_quote_source_url,l=t._qod_quote_source,r=t.title.rendered,u=(t.link,t.content.rendered);console.log("url source "+n),console.log("source "+l),o(".front-page-author-name").html("--"+r+","),o(".front-page-text").html(u),l.length>0&&n.length>0?o(".front-page-author-link").html('<h2 class="entry-title"><a href="'+n+'" rel="bookmark">'+l+"</a></h2>"):l.length>0?o(".front-page-author-link").html('<h2 class="entry-title">'+l+"</h2>"):n.length>0?o(".front-page-author-link").html('<h2 class="entry-title"><a href="'+n+'" rel="bookmark">@'+r+"</a></h2>"):o(".front-page-author-link").html("<span></span>")}(e);const n=t.slug,l=qod_api.home_url+"/"+n+"/";history.pushState(null,null,l)}).fail(function(o){console.log("error",o)})}),o(window).on("popstate",function(){window.location.replace(e)}),o("#quote-submission-form").on("submit",function(e){e.preventDefault();const t=o("#quote-author").val(),n=o("#quote-content").val(),l=o("#quote-source").val(),r=o("#quote-source-url").val();o.ajax({method:"post",url:qod_api.rest_url+"wp/v2/posts/",data:{title:t,content:n,_qod_quote_source:l,_qod_quote_source_url:r,comment_status:"closed"},beforeSend:function(o){o.setRequestHeader("X-WP-Nonce",qod_api.wpapi_nonce)}}).done(function(e){console.log(e),alert("Quote submitted"),o("#quote-submited").html('<p class="quote-received">Thanks, your quote submission was received</p>')}).fail(function(o){console.log("error",o),alert("Something went wrong, try again later.")})})})}(jQuery);